# zepto-test-task
Тестовое задание - API для ресурсов авторов, книг и комментариев к ним.
## Основные ресурсы API
* `/books/` - книги
* `/authors/` - авторы
* `/books/{book_id}/comments` - комментарии к книгам
* `/genres/` - жанры книг
## Запуск
### Генерация тестовых данных
Для генерации тестовых данных необходимо набрать команду:  
`python manage.py gen_fake_data [--authors={число авторов}]`  

Сгенерированных авторов можно получить с помощью запроса `GET /api/authors/`.  
Для генерации username пользователей использовался uuid4, чтобы в процессе гарантировать уникальность.  
Токен для автора можно получить по запросу `/api/api-token-auth/`.  
### Пример запроса
Пример данных для создания книги по запросу `POST /api/books/`:
```
{
    "title": "Звездный лед",
    "publ_year": 2005,
    'genre': "Horror" # список изначально созданных жанров можно посмотреть в gen_fake_data.py
}
```
Пример ответа на запрос создания:   
```
{
    "id":65,
    "title":"Звездный лед",
    "publ_year":2005,
    "author":"Атамурат Мулюнов",
    "genre":"Horror"
}
```
## Тесты
Тесты находятся в папке tests.
Для запуска всех тестов необходимо набрать команду:  
`pytest tests`  
Содержимое тестов можно найти в следующих файлах:  
```
tests  
├── test_accounts_app  
│   ├── endpoints_tests.py # тесты API CRUD  
│   ├── permissions_tests.py # тесты для ограничений доступа (permissions)  
└── test_books_app  
    ├── endpoints_tests.py  
    ├── permissions_tests.py  
 ```
